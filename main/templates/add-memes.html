{% extends 'layout.html' %}
{% block title %}Memes - Add Memes{% endblock %}

{% block content %}
{% if user.is_authenticated %}

<div id="memes">
    <form class="" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="field">
          <label class="label">Content</label>
          <div class="control">
            {{ form.body }}
          </div>
        </div>
        <div class="row">

            <div class="field">
                <div class="file is-primary" id="image">
                    <label class="file-label">
                        {{ form.image }}
                        <span class="file-cta">
                            <span class="file-icon">
                                <i class="fas fa-upload"></i>
                            </span>
                            <span class="file-label">
                                Image file…
                            </span>
                        </span>
                    </label>
                </div>
            </div>
            <div class="field">
                <div class="file is-warning" id="video">
                    <label class="file-label">
                        {{ form.video }}
                        <span class="file-cta">
                            <span class="file-icon">
                                <i class="fas fa-upload"></i>
                            </span>
                            <span class="file-label">
                                Video file…
                            </span>
                        </span>
                    </label>
                </div>
            </div>
        </div>
        <button class="button is-primary">Sign in</button>
      </form>

</div>


<script>
    image_input = document.getElementById("id_image").required
    video_input = document.getElementById("id_video").required
    image_input = true
    video_input = true
    document.getElementById("id_image").required = true;
    btn1 = document.querySelector('#image')
    btn2 = document.querySelector('#video')
    $(btn1).click(function (event) {
        video_input = false;
        btn2.remove();
    });
    $(btn2).click(function (event) {
        image_input = false;
        btn1.remove();
        document.getElementById("id_video").required = true;
    });
</script>
{% else %}
<h1>You Need To Login</h1>
<a href="{% url 'users:user-login' %}" class="btn btn-outline-success">Login</a>
{% endif %}
{% endblock %}